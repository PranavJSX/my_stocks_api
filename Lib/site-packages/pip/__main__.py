import os
import sys
import warnings

from flask import Flask,request,jsonify


app = Flask(__name__)

user_f_data=[  [
    {
      "earnings_data": [
        {
          "Amount": 5000,
          "Incoming": "Salary"
        }
      ],
      "invest_data": {
        "invested_portfolio_amount": {
          "inFD": 56000,
          "inMF": {
            "debt": 20000,
            "direct": 80000
          },
          "instocks": 40000
        },
        "mf_of_interest": [
          "SBI Mid cap",
          "HDFC FLexi Cap",
          "Canara Robeco Infrastructure fund"
        ],
        "stocks_of_interest": [
          "MTAR",
          "KCP",
          "Chambal Fertilizers",
          "Balrampur Chini"
        ]
      },
      "personal_data": {
        "Second_name": "Sakai",
        "dob": "05/05/1998",
        "first_name": "Jin",
        "phone_number": 1000040000
      },
      "spending_data": {
        "Extra_expenses": {
          "OTT's": 0,
          "Snacks": 0
        },
        "Regular_expenses": {
          "Food": 0,
          "House Rent": 0,
          "Travel": 0
        }
      },
      "user_id": 1111
    },
    200
  ],
  [
    {
      "earnings_data": [
        {
          "Amount": 5000,
          "Incoming": "Salary"
        }
      ],
      "invest_data": {
        "invested_portfolio_amount": {
          "inFD": 56000,
          "inMF": {
            "debt": 20000,
            "direct": 80000
          },
          "instocks": 40000
        },
        "mf_of_interest": [
          "SBI Mid cap",
          "HDFC FLexi Cap",
          "Canara Robeco Infrastructure fund"
        ],
        "stocks_of_interest": [
          "MTAR",
          "KCP",
          "Chambal Fertilizers",
          "Balrampur Chini"
        ]
      },
      "personal_data": {
        "Second_name": "Sakai",
        "dob": "05/05/1998",
        "first_name": "Jin",
        "phone_number": 1000040000
      },
      "spending_data": {
        "Extra_expenses": {
          "OTT's": 0,
          "Snacks": 0
        },
        "Regular_expenses": {
          "Food": 0,
          "House Rent": 0,
          "Travel": 0
        }
      },
      "user_id": 1234
    },
    200
  ]
]

@app.route("/get/users")
def get_users():
    # extra = request.args.get("extra")
    return user_f_data



@app.route("/add_user",methods=["POST"])
def add_user():
    data = request.get_json()
    print(data)
    user_f_data.append(data)
    print(user_f_data)
    return jsonify(data),201

@app.route("/get/user/",methods=["GET"])
def fetch_specific_user():
    user = request.args.get('user_id')
    print(user)
    for i in (user_f_data):
        temp = i[0]
        if (temp.get('user_id') == int(user)):
            return jsonify(temp)




if __name__ == "__main__":
    # Work around the error reported in #9540, pending a proper fix.
    # Note: It is essential the warning filter is set *before* importing
    #       pip, as the deprecation happens at import time, not runtime.
    print('Hellow')
    app.run(debug=True)
    # print((user_f_data[0])[0])

    for i in (user_f_data):
        temp = i[0]
        if(temp.get('user_id')==1111):
            print(temp.get('user_id'))
        # print()
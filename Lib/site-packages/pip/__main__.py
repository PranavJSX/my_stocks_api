import os
import sys
import warnings

from flask import Flask,request,jsonify


app = Flask(__name__)
stocks_data={}
stocks_data={
        'MTAR':{
            "Name":"MTAR Technologies",
            "Sector":"Machinery and Aerospace",
            "Current_price":1932.15
        },
        'FORT':{
            "Name": "Fortis Healthcare",
            "Sector": "Health and equipment",
            "Current_price": 466.65
        }
    }
@app.route("/get-user/<stock_code>")
def get_user(stock_code):
    # extra = request.args.get("extra")
    if stock_code in stocks_data:
        return jsonify(stocks_data[stock_code]),200
    else:
        return 'Invalid Argument'


@app.route("/add_stock",methods=["POST"])
def add_stock():
    data = request.get_json()
    print(data)
    stocks_data.update(data)
    print(stocks_data)
    return jsonify(data),201




if __name__ == "__main__":
    # Work around the error reported in #9540, pending a proper fix.
    # Note: It is essential the warning filter is set *before* importing
    #       pip, as the deprecation happens at import time, not runtime.
    print('Hellow')
    app.run(debug=True)



